<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validation Form</title>
    <link rel="stylesheet" href="style.css">


</head>

<body id="submitPage">
    <!--Paragraph for displaying the digits, The digits can be seen in the top of the page-->
    <p id="fourDigit" class="random"></p>

    <Form action="#">

        <h2>Validation Form</h2>

        <label>
            Dear <span id="nameCheck"></span>,<br><br>
            Thank you for your enquiry. <br><br>
            A 4 digit verification number has been sent to your phone number: </label> <span id="phoneNum"></span>
        <br><br>

        <label>
            Please enter in the following box and submit for confirmation:
            <input type="text" pattern="[0-9]{4}" id="otpInput" placeholder="Enter OTP" title="Hint : 4 Digit Number"
                required>
        </label> <br><br>


        <!--On clicking the button complete function is called for redirecting the page to pixel6 webpage-->
        <button type="submit" class="editbtn" id="validate">Validate</button><br>
    </Form>


    <script>
        //Generating 4 digit random number
        document.getElementById("submitPage").onload = () => { randomNum(); }

        var storedigit;  //variable declaration to store the 4 digit randomly generated number

        function randomNum() {
            var fourdigitsrandom = Math.floor(1000 + Math.random() * 9000);
            document.getElementById("fourDigit").innerText = fourdigitsrandom;
            storedigit = fourdigitsrandom;
        }

        document.getElementById("validate").onclick = () => { formComplete(); }
        //A function to compare the generated number with the input and take action accordingly , this function is called after submitting the validation form
        function formComplete() {
            var compare = document.getElementById("otpInput").value;
            var pattern = /^[0-9]{4}$/;
            if (compare.match(pattern)) {
                if (compare == storedigit) {
                    document.getElementById("submitPage").innerText = "Validation Successful!";
                    window.location.replace("http://pixel6.co/");
                }
                else {
                    window.location.replace("http://pixel6.co/404");
                }
            }
        }

        //Local storage of name and number stored from previous page
        document.getElementById("nameCheck").innerHTML = localStorage.getItem("nameValue");
        document.getElementById("phoneNum").innerHTML = localStorage.getItem("phoneNumber");
    </script>

</body>

</html>